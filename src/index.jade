doctype html
html(ng-app="notedown")
    head
        title Notedown!
        style.
            body {
                color: white;
            }
            [ng-cloak] {
                display: none;
            }
            .md-display-4 {
                font-size: 8rem;
                font-weight: 300;
                letter-spacing: -0.01em;
                line-height: 11.2rem;
            }
body(layout="row" layout-align="space-around start")
    md-content(ng-controller="NoteListController as vm" layout="column" style="max-width:800px;")
        div(layout="column" layout-align="space-around center")
            h1.md-display-4 Notedown!
        md-card(ng-controller="UserController as vm" ng-cloak)
            md-card-content(ng-if="!vm.user" layout="row" layout-align="space-around center")
                md-button(ng-click="vm.signIn()") Sign in with Google
            md-card-content(ng-if="vm.user" layout="row" layout-align="space-around center")
                md-button New note
                md-button(ng-click="vm.signOut()") Sign out {{ vm.user.first_name }} {{ vm.user.last_name }}
        md-card(ng-repeat="note in vm.notes" ng-cloak)
            md-card-content
                p(ng-bind-html="note.getHtml()")
                p(layout="row" layout-align="space-between center")
                    span
                        | {{ note.user.first_name }} {{ note.user.last_name }} @
                        | {{ note.edited | date : 'yyyy-MM-dd HH:mm' }}
                        span(ng-if="!note.public")  (private)
                    md-button(ng-if="note.user.id === vm.userId") Edit
    if production
        script(type="text/javascript" src="https://apis.google.com/js/client:platform.js" async defer)
        script(type="text/javascript" src="notedown.js")
    else
        script(type="text/javascript" src="https://apis.google.com/js/client:platform.js" async defer)
        script(type="text/javascript" src="jspm_packages/system.js")
        script(type="text/javascript" src="config.js")
        script(type="text/javascript" src="bootstrap.js")
